# Simple Docker

## Contents

1. [–ì–æ—Ç–æ–≤—ã–π –¥–æ–∫–µ—Ä](#1-–≥–æ—Ç–æ–≤—ã–π-–¥–æ–∫–µ—Ä)
2. [–û–ø–µ—Ä–∞—Ü–∏–∏ —Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º](#2-–æ–ø–µ—Ä–∞—Ü–∏–∏-—Å-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º)
3. [–ú–∏–Ω–∏ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä](#3-–º–∏–Ω–∏-–≤–µ–±-—Å–µ—Ä–≤–µ—Ä)
4. [–°–≤–æ–π –¥–æ–∫–µ—Ä](#4-—Å–≤–æ–π-–¥–æ–∫–µ—Ä)
5. [Dockle](#5-dockle)
6. [Basic Docker Compose](#6-–±–∞–∑–æ–≤—ã–π-docker-compose)

## 1. **–ì–æ—Ç–æ–≤—ã–π –¥–æ–∫–µ—Ä**

`$sudo snap install docker` - —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–æ–∫–µ—Ä

`$docker info` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –¥–æ–∫–µ—Ä–µ –∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö –Ω–∞ —Ç–µ–∫—É—â–∏–π –º–æ–º–µ–Ω—Ç

1. –í–∑—è—Ç—å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –¥–æ–∫–µ—Ä –æ–±—Ä–∞–∑ —Å nginx –∏ –≤—ã–∫–∞—á–∞—Ç—å –µ–≥–æ –ø—Ä–∏ –ø–æ–º–æ—â–∏ `docker pull nginx`

![part 1](screenshots/1.1.pull.png)

2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –¥–æ–∫–µ—Ä –æ–±—Ä–∞–∑–∞ —á–µ—Ä–µ–∑ `docker images`

![part 1](screenshots/1.2.images.png)

3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –¥–æ–∫–µ—Ä –æ–±—Ä–∞–∑ —á–µ—Ä–µ–∑ `docker run -d [image_id|repository]`

4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –æ–±—Ä–∞–∑ –∑–∞–ø—É—Å—Ç–∏–ª—Å—è —á–µ—Ä–µ–∑ `docker ps`

![part 1](screenshots/1.34run.png)

5. –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ —á–µ—Ä–µ–∑ `docker inspect [container_id|container_name]`

–ü–æ –≤—ã–≤–æ–¥—É –∫–æ–º–∞–Ω–¥—ã –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∏ –ø–æ–º–µ—Å—Ç–∏—Ç—å –≤ –æ—Ç—á—ë—Ç —Ä–∞–∑–º–µ—Ä –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, —Å–ø–∏—Å–æ–∫ –∑–∞–º–∞–ø–ª–µ–Ω–Ω—ã—Ö –ø–æ—Ä—Ç–æ–≤ –∏ ip –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

–ü—Ä–∏–º.  —Å–ª–æ–≤–æ **"–∑–∞–º–∞–ø–ª–µ–Ω–Ω—ã–π"** (mapped) –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ Docker –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ –ø—Ä–æ—Ü–µ—Å—Å—É –ø—Ä–∏–≤—è–∑–∫–∏ (–æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è) –ø–æ—Ä—Ç–æ–≤ –∏ —Ä–µ—Å—É—Ä—Å–æ–≤ –æ–¥–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞) –∫ –ø–æ—Ä—Ç–∞–º –∏ —Ä–µ—Å—É—Ä—Å–∞–º –¥—Ä—É–≥–æ–π —Å–∏—Å—Ç–µ–º—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ö–æ—Å—Ç–∞ –∏–ª–∏ —Å–µ—Ç–∏). –≠—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞ –∏–∑–≤–Ω–µ –∫ —Å–µ—Ä–≤–∏—Å–∞–º, —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã–º –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ, —á–µ—Ä–µ–∑ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –ø–æ—Ä—Ç—ã –Ω–∞ —Ö–æ—Å—Ç–µ.

![part 1](screenshots/1.5.inspect.png)

6. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–æ–∫–µ—Ä –æ–±—Ä–∞–∑ —á–µ—Ä–µ–∑ `docker stop [container_id|container_name]`

`docker ps`  - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤–µ—Å—å —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

![part 1](screenshots/1.6.stop.png)


7. –ó–∞–ø—É—Å—Ç–∏—Ç—å –¥–æ–∫–µ—Ä —Å –ø–æ—Ä—Ç–∞–º–∏ 80 –∏ 443 –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ, –∑–∞–º–∞–ø–ª–µ–Ω–Ω—ã–º–∏ –Ω–∞ —Ç–∞–∫–∏–µ –∂–µ –ø–æ—Ä—Ç—ã –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ, —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—É *run*

`sudo docker run -d -p 80:80 -p 443:443 nginx`

![part 1](screenshots/1.7.ports.png)

![part 1](screenshots/1.7.80.443.png)


8. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ –ø–æ –∞–¥—Ä–µ—Å—É *localhost:80* –¥–æ—Å—Ç—É–ø–Ω–∞ —Å—Ç–∞—Ä—Ç–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ **nginx**

![part 1](screenshots/1.8.curl.png)

![part 1](screenshots/1.8.brauz.png)

9. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –¥–æ–∫–µ—Ä –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —á–µ—Ä–µ–∑ `docker restart [container_id|container_name]`

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª—é–±—ã–º —Å–ø–æ—Å–æ–±–æ–º, —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—Å—Ç–∏–ª—Å—è.

![part 1](screenshots/1.9.restart.png)


## 2. **–û–ø–µ—Ä–∞—Ü–∏–∏ —Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º**

1. –ü—Ä–æ—á–∏—Ç–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª *nginx.conf* –≤–Ω—É—Ç—Ä–∏ –¥–æ–∫–µ—Ä –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—É *exec*

`docker exec -it –∏–º—è cat /etc/nginx/nginx.conf`

![part 2](screenshots/2.1.nginx.conf.png)

2. –°–æ–∑–¥–∞—Ç—å –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ —Ñ–∞–π–ª *nginx.conf*

![part 2](screenshots/2.2.chmod.png)

3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –≤ –Ω–µ–º –ø–æ –ø—É—Ç–∏ */status* –æ—Ç–¥–∞—á—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–µ—Ä–∞ **nginx**

![part 2](screenshots/2.3.cmd.png)
![part 2](screenshots/2.3.sub.status.on.png)

4. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å–æ–∑–¥–∞–Ω–Ω—ã–π —Ñ–∞–π–ª *nginx.conf* –≤–Ω—É—Ç—Ä—å –¥–æ–∫–µ—Ä –æ–±—Ä–∞–∑–∞ —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—É `sudo docker cp nginx.conf –∏–º—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:/etc/nginx/`
sudo docker cp nginx.conf interesting_ritchie:/etc/nginx/

![part 2](screenshots/2.4.docker.cp.png)

5. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å **nginx** –≤–Ω—É—Ç—Ä–∏ –¥–æ–∫–µ—Ä –æ–±—Ä–∞–∑–∞ —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—É `sudo docker exec interesting_ritchie nginx -s reload`

![part 2](screenshots/2.5.reload.png)

* **–§–ª–∞–≥ -s** –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç —Ñ–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ –ª–æ–≥–∏, –µ—Å–ª–∏ –æ–Ω–∏ –±—ã–ª–∏ –∏–∑–º–µ–Ω–µ–Ω—ã –ø–æ—Å–ª–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞.

* –û—Ç–∫—Ä–æ–µ–º –¥–æ—Å—Ç—É–ø –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `sudo docker exec hopeful_mendeleev chmod 777 ./var/log/nginx`.

* –ù–∞–∑–Ω–∞—á–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è monroebu –Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é /var/log/nginx —Å–æ –≤—Å–µ–º–∏ —Ñ–∞–π–ª–∞–º–∏ –≤ –Ω–µ–º `sudo docker exec hopeful_mendeleev chown monroebu:monroebu 777 ./var/log/nginx`. –ë–µ–∑ –∫–ª—é—á–∞ -R —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –±—É–¥—É—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é.

6. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø–æ –∞–¥—Ä–µ—Å—É *localhost:80/status* –æ—Ç–¥–∞–µ—Ç—Å—è —Å—Ç—Ä–∞–Ω–∏—á–∫–∞ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º —Å–µ—Ä–≤–µ—Ä–∞ **nginx**

![part 2](screenshots/2.6.status.png)

![part 2](screenshots/2.6.brastatus.png)

7. —Å–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤ —Ñ–∞–π–ª *container.tar* —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—É `sudo docker export interesting_ritchie > ./container.tar`
8. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä

![part 2](screenshots/2.7.exp.png)

9. –£–¥–∞–ª–∏—Ç—å –æ–±—Ä–∞–∑ —á–µ—Ä–µ–∑ `docker rmi [image_id|repository] -f`, –Ω–µ —É–¥–∞–ª—è—è –ø–µ—Ä–µ–¥ —ç—Ç–∏–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã

![part 2](screenshots/2.9.rmi.png)

10. –£–¥–∞–ª–∏—Ç—å –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä

![part 2](screenshots/2.10.rm.png)

11. –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –æ–±—Ä–∞—Ç–Ω–æ —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—É  `docker import -c 'cmd ["nginx", "-g", "daemon off;"]' -c 'ENTRYPOINT ["/docker-entrypoint.sh"]' ./container.tar nginx_new`.

* `–û–ø—Ü–∏—è -c` —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —Ç–æ, —á—Ç–æ –Ω—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—ã docker-entrypoint.sh –∏ ENTRYPOINT.

* —Å `—Ñ–ª–∞–≥–æ–º -g` Docker –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏–∑ —Ñ–∞–π–ª–∞, –∞ –±–µ–∑ —ç—Ç–æ–≥–æ —Ñ–ª–∞–≥–∞ Docker –ø—Ä–æ—Å—Ç–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Ñ–∞–π–ª –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä.

* `daemon off` - —ç—Ç–æ –∫–æ–º–∞–Ω–¥–∞, –∫–æ—Ç–æ—Ä–∞—è –æ—Ç–∫–ª—é—á–∞–µ—Ç –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä –¥–æ–∫–µ—Ä–∞ (–∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ)

–ó–∞–ø—É—Å—Ç–∏—Ç—å –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä.
–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø–æ –∞–¥—Ä–µ—Å—É *localhost:80/status* –æ—Ç–¥–∞–µ—Ç—Å—è —Å—Ç—Ä–∞–Ω–∏—á–∫–∞ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º —Å–µ—Ä–≤–µ—Ä–∞ **nginx**.

![part 2](screenshots/2.11.import.png)

## 3. –ú–∏–Ω–∏ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä

1. –ù–∞–ø–∏—Å–∞—Ç—å –º–∏–Ω–∏ —Å–µ—Ä–≤–µ—Ä –Ω–∞ **C** –∏ **FastCgi**, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –ø—Ä–æ—Å—Ç–µ–π—à—É—é —Å—Ç—Ä–∞–Ω–∏—á–∫—É —Å –Ω–∞–¥–ø–∏—Å—å—é `Hello World!`. 
**FastCGI** ‚Äî —ç—Ç–æ –ø—Ä–æ—Ç–æ–∫–æ–ª, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–µ–±-—Å–µ—Ä–≤–µ—Ä—É –∏ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é –æ–±—â–∞—Ç—å—Å—è –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º. 

* –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤ –≤–∏—Ä—Ç—É–∞–ª–∫—É `sudo apt install gcc`.

* –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É libfcgi-dev, –≤—ã–ø–æ–ª–Ω–∏–≤ –∫–æ–º–∞–Ω–¥—É `sudo apt-get install libfcgi-dev nginx`.

* –ü—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–∞ C:

–ò—Å–ø–æ–ª—å–∑—É—è API, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–π <fcgiapp.h> –∑–∞–≥–æ–ª–æ–≤–æ–∫, –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å —Å–≤–µ–¥–µ–Ω–∏—è –æ —Å–æ–∫–µ—Ç–µ, —á—Ç–æ –¥–µ–ª–∞–µ—Ç –∑–∞ –≤–∞—Å —Å–æ–∑–¥–∞–Ω–∏–µ —Å –ø–æ–º–æ—â—å—é –≤–Ω–µ—à–Ω–∏—Ö —Å—Ä–µ–¥—Å—Ç–≤.
–î–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä —Ñ–∞–π–ª–∞ —Å–æ–∫–µ—Ç–∞ TCP –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

* `int sockfd = FCGX_OpenSocket("127.0.0.1:9000", 100);`
...–∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—è —Å–æ–∫–µ—Ç—ã Unix:
* `int sockfd = FCGX_OpenSocket("/var/run/fcgi.sock", 100);`

![part 3](screenshots/3.1.png)

–ü–æ—Å–ª–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –¥–≤–æ–∏—á–Ω—ã–π —Ñ–∞–π–ª –º–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –Ω–∞–ø—Ä—è–º—É—é, –±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è spawn-fcgi –∏–ª–∏ cgi-fcgi .

* –°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å server.c, –≤—ã–ø–æ–ª–Ω–∏–≤ –∫–æ–º–∞–Ω–¥—É `gcc server.c -lfcgi -o server`

![part 3](screenshots/3.1.install.png)

**–í–ê–†–ò–ê–ù–¢ 1**

* –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª default 
 
 `sudo chmod +w /etc/nginx/sites-enabled/default`

`sudo vim /etc/nginx/sites-enabled/default`

–¥–æ:o
        # Add index.php to the list if you are using PHP
        index index.html index.htm index.nginx-debian.html;

        server_name _;

        location / {
                # First attempt to serve request as file, then
                # as directory, then fall back to displaying a 404.
                #try_files $uri $uri/ =404;
                fastcgi_pass 127.0.0.1:9000;
                include fastcgi_params;
        }

__________________

`sudo service nginx restart`

* –∑–∞–ø—É—Å–∫–∞—é –ø—Ä–æ–≥—Ä–∞–º–º—É –≤ —Ñ–æ–Ω–µ `./server&`

![part 3](screenshots/3.1.yes.png)

* `jobs` –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —á—Ç–æ –≤–∏—Å–∏—Ç –≤ —Ñ–æ–Ω–µ –≤–≤–µ–¥–∏ 

* –ø–æ—Å–ª–µ –±—É–¥–µ—Ç –≤—ã–≤–µ–¥–µ–Ω —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–≥—Ä–∞–º–º —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö –≤ —Ñ–æ–Ω–µ 
—á—Ç–æ–±—ã –≤—ã–≤–µ—Å—Ç–∏ –∏–∑ —Ñ–æ–Ω–∞ –Ω—É–∂–Ω–æ –Ω–∞–ø–∏—Å–∞—Ç—å 
`fg –∞–π–¥–∏_–ø—Ä–æ—Ü–µ—Å—Å–∞`

**–í–ê–†–ò–ê–ù–¢ 2**

2. –ó–∞–ø—É—Å—Ç–∏—Ç—å –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–π –º–∏–Ω–∏ —Å–µ—Ä–≤–µ—Ä —á–µ—Ä–µ–∑ *spawn-fcgi* –Ω–∞ –ø–æ—Ä—Ç—É 8080. **spawn-fcgi** ‚Äî —ç—Ç–æ —É—Ç–∏–ª–∏—Ç–∞, –∏—Å–ø–æ–ª—å–∑—É–µ–º–∞—è –≤ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–µ FastCGI –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ FastCGI.

* –û—Ç–∫–∞—Ç–∏–ª–∞ –¥–∞–º–ø –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã –¥–æ –∫–æ–Ω—Ü–∞ 2 –∑–∞–¥–∞–Ω–∏—è.

//* –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É spawn-fcgi, –≤—ã–ø–æ–ª–Ω–∏–≤ –∫–æ–º–∞–Ω–¥—É `sudo apt-get install spawn-fcgi`

//* –ó–∞–ø—É—Å—Ç–∏—Ç—å –º–∏–Ω–∏ —Å–µ—Ä–≤–µ—Ä —á–µ—Ä–µ–∑ spawn-fcgi –Ω–∞ –ø–æ—Ä—Ç—É 8080: `spawn-fcgi -p 8080 ./server`

* –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç `lsof -i :8080`. lsof - —ç—Ç–æ —É—Ç–∏–ª–∏—Ç–∞, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –æ—Ç–∫—Ä—ã—Ç—ã–µ —Ñ–∞–π–ª—ã –∏ —Å–æ–∫–µ—Ç—ã –Ω–∞ –≤–∞—à–µ–π —Å–∏—Å—Ç–µ–º–µ. –û–ø—Ü–∏—è -i —É–∫–∞–∑—ã–≤–∞–µ—Ç lsof –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–µ—Ç–µ–≤—ã—Ö —Å–æ–∫–µ—Ç–∞—Ö.

![part 3](screenshots/3.2.spawn.png)

3. –ù–∞–ø–∏—Å–∞—Ç—å —Å–≤–æ–π *nginx.conf*, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã —Å 81 –ø–æ—Ä—Ç–∞ –Ω–∞ *127.0.0.1:8080*
    1. –ó–∞–≥—Ä—É–∑–∏—Ç—å nginx, –≤—ã–ø–æ–ª–Ω–∏–≤ –∫–æ–º–∞–Ω–¥—É `docker pull nginx`
    
    2. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ø–æ—Ä—Ç 81 –Ω–µ –∑–∞–Ω—è—Ç, –≤—ã–ø–æ–ª–Ω–∏–≤ –∫–æ–º–∞–Ω–¥—É `lsof -i :81`

    3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –¥–æ–∫–µ—Ä —Å –ø–æ—Ä—Ç–æ–º 81 –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ, –∑–∞–º–∞–ø–ª–µ–Ω–Ω—ã–º –Ω–∞ —Ç–∞–∫–æ–π –∂–µ –ø–æ—Ä—Ç –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ, —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—É `docker run -d -p 81:81 nginx`<br>
        ![part 3](screenshots/3.3.81.png)<br>

    4. –°–æ–∑–¥–∞—Ç—å –≤ –ø—Ä–æ–µ–∫—Ç–µ (–Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ) —Ñ–∞–π–ª nginx.conf –∫–æ–º–∞–Ω–¥–æ–π `sudo touch nginx.conf ; sudo chmod 777 nginx.conf; sudo docker exec silly_napier cat /etc/nginx/nginx.conf > nginx.conf` <br>
    
    5. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –µ–≥–æ –Ω–∞ –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ —Å 81 –ø–æ—Ä—Ç–∞ –Ω–∞ 127.0.0.1:8080<br>

        ![part 3](screenshots/3.3.nginx.png)<br>

        ![part 3](screenshots/3.3.conf.png)<br>

    6. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å–æ–∑–¥–∞–Ω–Ω—ã–π —Ñ–∞–π–ª nginx.conf –∏ server.c –≤–Ω—É—Ç—Ä—å –¥–æ–∫–µ—Ä –æ–±—Ä–∞–∑–∞ —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—ã `sudo docker cp nginx.conf silly_napier:/etc/nginx/` –∏ `sudo docker cp ../03/server.c silly_napier:/home/`:<br>
        ![part 3](screenshots/3.3.cp.png)<br>

    7. –°–≤—è–∑–∞—Ç—å —Ç–µ–∫—É—â–∏–π —Ç–µ—Ä–º–∏–Ω–∞–ª —Å —Ç–µ—Ä–º–∏–Ω–∞–ª–æ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ objective_margulis –∫–æ–º–∞–Ω–¥–æ–π `sudo docker exec -it silly_napier bash`:<br>
        ![part 3](screenshots/3.3.bash.png)<br>

    8. –û–±–Ω–æ–≤–∏—Ç—å –ø–∞–∫–µ—Ç—ã –∫–æ–º–∞–Ω–¥–æ–π `apt update`:<br>
    
    9. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å gcc, spawn-fcgi, libfcgi-dev –∫–æ–º–∞–Ω–¥–æ–π `apt install gcc spawn-fcgi libfcgi-dev`:<br>
        ![part 3.14](screenshots/3.3.update.png)<br>

    10. –°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å:<br>
    `cd home`<br>
    `gcc -o server server.c -lfcgi`<br>
    `spawn-fcgi -p 8080 ./server`<br>
    `nginx -s reload`<br>
    –í–∞–∂–Ω–æ –æ—Ç–º–µ—Ç–∏—Ç—å, —á—Ç–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã 'nginx -s reload' –≤–Ω—É—Ç—Ä–∏ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –Ω–µ –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫—É —Å–∞–º–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞. –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø—Ä–æ–¥–æ–ª–∂–∏—Ç —Ä–∞–±–æ—Ç–∞—Ç—å, –¥–∞–∂–µ –µ—Å–ª–∏ —ç–∫–∑–µ–º–ø–ª—è—Ä nginx –≤–Ω—É—Ç—Ä–∏ –Ω–µ–≥–æ –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω.<br>

        ![part 3.15](screenshots/3.3.reload.png)<br>

* –£–∑–Ω–∞—é IP –∞–¥—Ä–µ—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ `sudo docker inspect silly_napier | grep IPAddress`

![part 3.15](screenshots/3.3.inspect.png)<br>
![part 3.15](screenshots/3.3.ports.png)<br>

4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ –ø–æ *localhost:81* –æ—Ç–¥–∞–µ—Ç—Å—è –Ω–∞–ø–∏—Å–∞–Ω–Ω–∞—è –≤–∞–º–∏ —Å—Ç—Ä–∞–Ω–∏—á–∫–∞

`curl localhost:81`

![part 3.15](screenshots/3.4.helloworld.png)<br>

![part 3.15](screenshots/3.4.helloworld2.png)<br>

* –î–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω–æ–≥–æ –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ Ubuntu 20.04 –±–µ–∑ –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç–æ–≤—ã–π –±—Ä–∞—É–∑–µ—Ä, —Ç–∞–∫–æ–π –∫–∞–∫ Links –∏–ª–∏ Lynx. 

–î–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ **Links**, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â—É—é –∫–æ–º–∞–Ω–¥—É –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:
```
sudo apt update
sudo apt install lynx
```

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤—ã —Å–º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç–æ–≤—ã–π –±—Ä–∞—É–∑–µ—Ä –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥—Ä—É–≥–∏—Ö –≤–µ–±-–æ–ø–µ—Ä–∞—Ü–∏–π –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –∏–∑ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞.

`lynx localhost:81`

![part 3.15](screenshots/3.4.lynx.png)<br>

* –ü–æ–ª–æ–∂–∏—Ç—å —Ñ–∞–π–ª *nginx.conf* –ø–æ –ø—É—Ç–∏ *./nginx/nginx.conf* (—ç—Ç–æ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –ø–æ–∑–∂–µ)

* `shutdown -h now` - –≤—ã–∫–ª—é—á–∏—Ç—å –≤–∏—Ä—Ç—É–∞–ª–∫—É

## 4. –°–≤–æ–π –¥–æ–∫–µ—Ä

1. –ù–∞–ø–∏—Å–∞—Ç—å —Å–≤–æ–π –¥–æ–∫–µ—Ä –æ–±—Ä–∞–∑, –∫–æ—Ç–æ—Ä—ã–π:
    - —Å–æ–±–∏—Ä–∞–µ—Ç –∏—Å—Ö–æ–¥–Ω–∏–∫–∏ –º–∏–Ω–∏ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ FastCgi –∏–∑ [–ß–∞—Å—Ç–∏ 3](#part-3-–º–∏–Ω–∏-–≤–µ–±-—Å–µ—Ä–≤–µ—Ä)
    - –∑–∞–ø—É—Å–∫–∞–µ—Ç –µ–≥–æ –Ω–∞ 8080 –ø–æ—Ä—Ç—É
    - –∫–æ–ø–∏—Ä—É–µ—Ç –≤–Ω—É—Ç—Ä—å –æ–±—Ä–∞–∑–∞ –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–π *./nginx/nginx.conf*
    - –∑–∞–ø—É—Å–∫–∞–µ—Ç **nginx**.

- **run.sh** –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç —Ñ–∞–π–ª server.c –∏–∑ –ø—Ä–æ—à–ª–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –µ–≥–æ –Ω–∞ 8080 –ø–æ—Ä—Ç—É (—Ñ–∞–π–ª help_in_cont.sh —Å 3 –∑–∞–¥–∞–Ω–∏—è):

- **nginx.conf** –∏–∑ 3 —á–∞—Å—Ç–∏

- **Dockerfile**, —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –±—É–¥—É—â–µ–≥–æ –æ–±—Ä–∞–∑–∞ (—Å–ª–µ–¥—É–µ—Ç –∏–∑–±–µ–≥–∞—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤ –∫–æ–º–∞–Ω–¥ RUN):

2. –°–æ–±—Ä–∞—Ç—å –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–π –¥–æ–∫–µ—Ä –æ–±—Ä–∞–∑ —á–µ—Ä–µ–∑ build <br>
```
FROM nginx

WORKDIR /home
LABEL autor=monroebu

COPY ./nginx/nginx.conf /etc/nginx/nginx.conf
COPY ./server.c .
COPY ./run.sh .

RUN apt-get update \
    && apt-get install -y gcc spawn-fcgi libfcgi-dev \    
    && gcc -o server server.c -lfcgi
ENTRYPOINT [ "./run.sh" ]

```
<br>

![part 3.15](screenshots/4.build1.png)

...

![part 3.15](screenshots/4.build2.png)
<br>

3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á–µ—Ä–µ–∑ `docker images`, —á—Ç–æ –≤—Å–µ —Å–æ–±—Ä–∞–ª–æ—Å—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ<br>
![part 3.15](screenshots/4.3.png)<br>

* `docker system prune` - –æ—á–∏—Å—Ç–∫–∞ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤. 
    ##### **docker system prune** —É–¥–∞–ª—è–µ—Ç –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ Docker, –≤–∫–ª—é—á–∞—è: 
    ##### 1. –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ (–æ—Ä—Ñ–∞–Ω–Ω—ã–µ) –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
    ##### 2. –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –æ–±—Ä–∞–∑—ã
    ##### 3. –í—Ä–µ–º–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
    ##### 4. –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ volumes

* `docker image rm 705ce0da0dff` - —É–¥–∞–ª–∏—Ç—å –æ–±—Ä–∞–∑ 705ce0da0dff (ID)


* –ö–æ–º–∞–Ω–¥–∞ `nginx -g 'daemon off'` –∑–∞–ø—É—Å–∫–∞–µ—Ç –≤–µ–±-—Å–µ—Ä–≤–µ—Ä Nginx –≤ —Ä–µ–∂–∏–º–µ –¥–µ–º–æ–Ω–∞ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º, —á—Ç–æ –æ–Ω –Ω–µ –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ. –û–±—ã—á–Ω–æ, –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ Nginx, –æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –¥–µ–º–æ–Ω –∏ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ —Ñ–æ–Ω–æ–≤—ã–π —Ä–µ–∂–∏–º –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏. –û–¥–Ω–∞–∫–æ —Å –ø–æ–º–æ—â—å—é –æ–ø—Ü–∏–∏ -g 'daemon off' –º—ã —É–∫–∞–∑—ã–≤–∞–µ–º Nginx –Ω–µ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –≤ —Ñ–æ–Ω–æ–≤—ã–π —Ä–µ–∂–∏–º, –∞ –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è –≤ –ø–µ—Ä–µ–¥–Ω–µ–º –ø–ª–∞–Ω–µ, —á—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∏–ª–∏ —Ä–∞–±–æ—Ç—ã —Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏ –≤ Docker, –≥–¥–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è, –µ—Å–ª–∏ –ø—Ä–æ—Ü–µ—Å—Å –≤ –ø–µ—Ä–µ–¥–Ω–µ–º –ø–ª–∞–Ω–µ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è.


4. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–æ–±—Ä–∞–Ω–Ω—ã–π –¥–æ–∫–µ—Ä –æ–±—Ä–∞–∑ —Å –º–∞–ø–ø–∏–Ω–≥–æ–º 81 –ø–æ—Ä—Ç–∞ –Ω–∞ 80 –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ –∏ –º–∞–ø–ø–∏–Ω–≥–æ–º –ø–∞–ø–∫–∏ *./nginx* –≤–Ω—É—Ç—Ä—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –ø–æ –∞–¥—Ä–µ—Å—É, –≥–¥–µ –ª–µ–∂–∞—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã **nginx**'–∞ (—Å–º. –ß–∞—Å—Ç—å 2)

##### –ú–∞–ø–ø–∏–Ω–≥ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ Docker –æ–∑–Ω–∞—á–∞–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∫—É —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –º–µ–∂–¥—É –ø–æ—Ä—Ç–∞–º–∏ –∏–ª–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è–º–∏ –Ω–∞ —Ö–æ—Å—Ç-—Å–∏—Å—Ç–µ–º–µ –∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º.

##### –ù–∞–ø—Ä–∏–º–µ—Ä, –º–∞–ø–ø–∏–Ω–≥ –ø–æ—Ä—Ç–æ–≤ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–≤—è–∑–∞—Ç—å –ø–æ—Ä—Ç –Ω–∞ —Ö–æ—Å—Ç-–º–∞—à–∏–Ω–µ —Å –ø–æ—Ä—Ç–æ–º –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ Docker, —Ç–∞–∫ —á—Ç–æ –∑–∞–ø—Ä–æ—Å—ã, –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –ø–æ—Ä—Ç —Ö–æ—Å—Ç–∞, –±—É–¥—É—Ç –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ã –≤–Ω—É—Ç—Ä—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

##### –ú–∞–ø–ø–∏–Ω–≥ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–≤—è–∑–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –Ω–∞ —Ö–æ—Å—Ç-—Å–∏—Å—Ç–µ–º–µ —Å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–µ–π –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞. –≠—Ç–æ —É–¥–æ–±–Ω–æ –¥–ª—è –æ–±–º–µ–Ω–∞ —Ñ–∞–π–ª–∞–º–∏ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏ –º–µ–∂–¥—É —Ö–æ—Å—Ç–æ–º –∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º.

##### –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Å–æ–±—Ä–∞–Ω–Ω–æ–≥–æ Docker-–æ–±—Ä–∞–∑–∞ —Å –º–∞–ø–ø–∏–Ω–≥–æ–º –ø–æ—Ä—Ç–∞ 81 –Ω–∞ –ø–æ—Ä—Ç 80 –∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ ./nginx –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã nginx –Ω–∞ —Ö–æ—Å—Ç-—Å–∏—Å—Ç–µ–º–µ –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –ø–æ —É–∫–∞–∑–∞–Ω–Ω–æ–º—É –ø—É—Ç–∏.

* —É–¥–∞–ª–∏–ª–∞ —Å–æ–∑–¥–∞–Ω–Ω—ã–π –æ–±—Ä–∞–∑, –¥–æ–ø–∏—Å–∞–ª–∞ –≤ Dockerfile –Ω–æ–º–µ—Ä –ø–æ—Ä—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ
```
EXPOSE 80
```

* `sudo docker run -p 80:81 76b3e3fb8858`
    - –∑–∞–ø—É—Å–∫–∞–µ—Ç –æ–±—Ä–∞–∑ ID 76b3e3fb8858, —É–∫–∞–∑—ã–≤–∞—è –∫–∞–∫–æ–π –ø–æ—Ä—Ç –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ (80) –∏ —Å –∫–∞–∫–∏–º –ø–æ—Ä—Ç–æ–º –≤–Ω—É—Ç—Ä–∏ —Å–∞–º–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –º—ã —Å–æ–µ–¥–∏–Ω—è–µ–º—Å—è (81)

* `sudo docker run -d -p 80:81 --name my_container -v /home/monroebu/DO5_SimpleDocker-1/src/04/nginx/nginx.conf:/etc/nginx/nginx.conf -d my_docker`
    - -v /home/monroebu/DO5_SimpleDocker-1/src/04/nginx/nginx.conf:/etc/nginx/nginx.conf —Å–æ–∑–¥–∞–µ—Ç –ø—Ä–∏–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ç–æ–º–∞, –≥–¥–µ —Ñ–∞–π–ª /home/monroebu/DO5_SimpleDocker-1/src/04/nginx/nginx.conf –Ω–∞ —Ö–æ—Å—Ç–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –ø–æ –ø—É—Ç–∏ /etc/nginx/nginx.conf.
    - -d –∑–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ (detached mode).

* —Å–æ–∑–¥–∞–ª–∞ —Ñ–∞–π–ª –≤ –ø–æ–º–æ—â—å `build.sh`:
```
#!/bin/bash

sudo docker build -t my_docker .

#sudo docker run -d -p 80:81 --name my_container my_docker

sudo docker run -d -p 80:81 --name my_container -v /home/monroebu/DO5_SimpleDocker-1/src/04/nginx/nginx.conf:/etc/nginx/nginx.conf -d my_docker

echo -e "\033[32m""\t\tmonroebu""\033[0m"
```

![part 3.15](screenshots/4.3.png)<br>

* —É–±–µ–¥–∏–≤—à–∏—Å—å, —á—Ç–æ –ø—Ä–æ—á–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –Ω–µ –∑–∞–ø—É—â–µ–Ω—ã, –∑–∞–ø—É—Å—Ç–∏–ª–∞ build.sh

5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø–æ localhost:80 –¥–æ—Å—Ç—É–ø–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—á–∫–∞ –Ω–∞–ø–∏—Å–∞–Ω–Ω–æ–≥–æ –º–∏–Ω–∏ —Å–µ—Ä–≤–µ—Ä–∞

![part 3.15](screenshots/4.hello.png)<br>

6. –î–æ–ø–∏—Å–∞—Ç—å –≤ *./nginx/nginx.conf* –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—á–∫–∏ */status*, –ø–æ –∫–æ—Ç–æ—Ä–æ–π –Ω–∞–¥–æ –æ—Ç–¥–∞–≤–∞—Ç—å —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞ **nginx**

* –î–æ–ø–∏—Å–∞–ª–∞ –≤ nginx.conf `stub_status on`:<br>
![part 3.15](screenshots/4.nginx.png)<br>

7. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –¥–æ–∫–µ—Ä –æ–±—Ä–∞–∑
*–ï—Å–ª–∏ –≤—Å—ë —Å–¥–µ–ª–∞–Ω–æ –≤–µ—Ä–Ω–æ, —Ç–æ, –ø–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ–∞–π–ª–∞ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª –≤–Ω—É—Ç—Ä–∏ –¥–æ–∫–µ—Ä –æ–±—Ä–∞–∑–∞ –¥–æ–ª–∂–µ–Ω –æ–±–Ω–æ–≤–∏—Ç—å—Å—è —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –±–µ–∑ –ª–∏—à–Ω–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π*

* `docker exec -it –∏–º—è bash`

* –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∫–æ–º–∞–Ω–¥–∞ `nginx -s reload`

8. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Ç–µ–ø–µ—Ä—å –ø–æ *localhost:80/status* –æ—Ç–¥–∞–µ—Ç—Å—è —Å—Ç—Ä–∞–Ω–∏—á–∫–∞ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º **nginx**

![part 3.15](screenshots/4.status.png)<br>

**9. –ü–æ–ª–µ–∑–Ω–æ–µ**

* `systemctl stop docker` - –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–ª—É–∂–±—É Docker (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞). –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ –æ—Ç–∫–ª—é—á–µ–Ω–∏—é –≤—Å–µ—Ö Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–µ –∑–∞–∫–æ–Ω—á–∏—Ç—Å—è.

* `systemctl start docker` - –∑–∞–ø—É—Å–∫ —Å–ª—É–∂–±—ã –¥–æ–∫–µ—Ä–∞

* `/var/lib/docker` - –≤—Å–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –æ—Ç–Ω–æ—Å—è—Ç—Å—è –∫ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º, –æ–±—Ä–∞–∑–∞–º, —Ç–æ–º–∞–º –∏ —Å–µ—Ç—è–º Docker

* `env` - –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (environment veriables) 
 
* `docker volume ls` - –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–∞–∫–∏–µ volumes –µ—Å—Ç—å (–ø–æ—Å—Ç–æ—è–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ) 
 
* `cat <<EOT >> 1.txt` - —Ç–∞–∫ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Ç–µ–∫—Å—Ç –≤ —Ñ–∞–π–ª 1.txt, –Ω–∞—Ö–æ–¥—è—Å—å –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –±–µ–∑ –≤–∏–º–∞ 
 
* `docker volume create abcd` - —Å–æ–∑–¥–∞–Ω–∏–µ volume abcd (—Å–º –ø–∞–ø–∫—É /var/lib/docker/volumes/ –ª–∏–±–æ `var/snap/docker/common/var-lib-docker/volumes`) 
 
* `docker volume rm abcd` - —É–¥–∞–ª–µ–Ω–∏–µ –≤–æ–ª—å—é–º–∞ abcd 
 
* `docker volume ls` - –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–∞–∫–∏–µ —É–∂–µ –≤–æ–ª—å—é–º—ã –µ—Å—Ç—å

* `docker run nginx --network=host` - –∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –≤ —Ç–∏–ø–µ —Å–µ—Ç–∏ host (–Ω–∞—Ä—è–¥—É —Å bridge, none). –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–æ–ª—É—á–∞–µ—Ç IP-–∞–¥—Ä–µ—Å —Ö–æ—Å—Ç–∞, –æ—Ç–ª–∏—á–∞—é—Ç—Å—è –ø–æ—Ä—Ç–∞–º–∏.

* `docker network create --drive bridge MYNAME` - —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π —Å–µ—Ç–∏ MYNAME. –µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑—ã–≤–∞—Ç—å --drive, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ç–∏–ø –±—É–¥–µ—Ç bridge

* `docker network ls` - –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å, –∫–∞–∫–∏–µ —Ç–∏–ø—ã —Å–µ—Ç–µ–π –µ—Å—Ç—å –≤ –¥–æ–∫–µ—Ä–µ

* `docker run --name comtainer1111 --net MYNAME nginx /bin/bash` - –∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ comtainer1111 –≤ —Å–µ—Ç–∏ MYNAME

* `docker network connect MYNAME comtainer2` - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤ —Å–µ—Ç—å MYNAME –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ comtainer2 –∏–∑ –¥—Ä—É–≥–æ–π —Å–µ—Ç–∏. –¢–µ–ø–µ—Ä—å comtainer1111 –∏ comtainer2 –±—É–¥—É—Ç –ø–∏–Ω–≥–æ–≤–∞—Ç—å—Å—è –∏ –ø–æ IP –∏ –ø–æ DNS. –ß—Ç–æ–±—ã –æ—Ç–∫–ª—é—á–∏—Ç—å—Å—è –æ—Ç —Å—Ç–∞—Ä–æ–π —Å–µ—Ç–∏, –∏–∑ `docker inspect container2` –≤–∑—è—Ç—å `"NetworkID"` –∏ –≤–≤–µ—Å—Ç–∏ –∫–æ–º–∞–Ω–¥—É `docker network disconnect 0939b0064cd18360b2b9f4f1eec3b0af7dc15345da87ea86685b6528f88836fb container2` (0939b0064c... - –¥–ª–∏–Ω–Ω—ã–π ID —Å—Ç–∞—Ä–æ–π —Å–µ—Ç–∏ (NetworkID)).

* `docker tag 9dabad518d97 ggg` - –µ—Å–ª–∏ –Ω–∞–¥–æ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å –æ–±—Ä–∞–∑ –Ω–∞ ggg (9dabad518d97 -  IMAGE ID —ç—Ç–æ–≥–æ –æ–±—Ä–∞–∑–∞), –Ω–∞–ø—Ä–∏–º–µ—Ä —Å–¥–µ–ª–∞–ª–∏ –∫–æ–≥–¥–∞ "docker build ." –±–µ–∑ —É–∫–∞–∑–∞–Ω–∏—è –∏–º–µ–Ω–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

* `curl -Li localhost:80`
    * –ö–ª—é—á `-i` –≤ –∫–æ–º–∞–Ω–¥–µ curl -Li localhost:80 –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–π URL –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∑–∞–≥–æ–ª–æ–≤–∫–∏ –æ—Ç–≤–µ—Ç–∞ —Å–µ—Ä–≤–µ—Ä–∞, –≤ —Ç–æ–º —á–∏—Å–ª–µ —Å—Ç–∞—Ç—É—Å –æ—Ç–≤–µ—Ç–∞ –∏ –¥—Ä—É–≥–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏. 
    * –ö–ª—é—á `-L` —É–∫–∞–∑—ã–≤–∞–µ—Ç curl —Å–ª–µ–¥–æ–≤–∞—Ç—å –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º (–µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç—å) –∏ –ø–æ–ª—É—á–∏—Ç—å –∫–æ–Ω–µ—á–Ω—ã–π URL.


## 5. **Dockle**

–ü–æ—Å–ª–µ –Ω–∞–ø–∏—Å–∞–Ω–∏—è –æ–±—Ä–∞–∑–∞ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –µ–≥–æ –Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å.

0. –£—Å—Ç–∞–Ω–æ–≤–∫–∞
```
$ VERSION=$(
 curl --silent "https://api.github.com/repos/goodwithtech/dockle/releases/latest" | \
 grep '"tag_name":' | \
 sed -E 's/.*"v([^"]+)".*/\1/' \
) && curl -L -o dockle.deb https://github.com/goodwithtech/dockle/releases/download/v${VERSION}/dockle_${VERSION}_Linux-64bit.deb
$ sudo dpkg -i dockle.deb && rm dockle.deb
```

1. –ü—Ä–æ—Å–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –æ–±—Ä–∞–∑ –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –∑–∞–¥–∞–Ω–∏—è —á–µ—Ä–µ–∑ `dockle [image_id|repository]`

![part 5](screenshots/5.1.dockle.png)<br>

–ü–æ–¥ —Ç–µ—Ä–º–∏–Ω–æ–º `Healthcheck` —Å–ª–µ–¥—É–µ—Ç –ø–æ–Ω–∏–º–∞—Ç—å —Å–ø–æ—Å–æ–± –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—á–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ä–µ—Å—É—Ä—Å–∞. –û–Ω –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–Ω–æ–≥–æ –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

–°–æ–∑–¥–∞–≤–∞–µ–º–∞—è –∫–æ–º–∞–Ω–¥–∞ Healthcheck –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, —á—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å—Å—è –≤ –µ–≥–æ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏. Docker –±–µ–∑ Healthcheck –Ω–µ —Å–º–æ–∂–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ª–∏ –∑–∞–ø—É—â–µ–Ω—ã —Ä–∞–±–æ—Ç–∞—é—â–∏–µ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ —Å–ª—É–∂–±—ã.

2. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ–±—Ä–∞–∑ —Ç–∞–∫, —á—Ç–æ–±—ã –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ —á–µ—Ä–µ–∑ **dockle** –Ω–µ –±—ã–ª–æ –æ—à–∏–±–æ–∫ –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π

* **FATAL - CIS-DI-0010: Do not store credential in environment variables/files** - –∏—Å–ø—Ä–∞–≤–∏–ª–∞, –≤–∑—è–≤ –Ω–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π nginx, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è, –∞ ubuntu/nginx

* **FATAL   - DKL-DI-0005: Clear apt-get caches** - –¥–æ–±–∞–≤–∏–ª–∞ `rm -rf /var/lib/apt/lists` after `apt-get install|update` –≤ –¥–æ–∫–µ—Ä—Ñ–∞–π–ª. –ï—Å–ª–∏ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Å–¥–µ–ª–∞—Ç—å curl localhost:81, —Ç–æ —Å–ø–µ—Ä–≤–∞ –∑–∞–ø—É—Å—Ç–∏—Ç—å –¥–≤–µ –∫–æ–º–∞–Ω–¥—ã: `apt update && apt install curl`.

* **WARN    - CIS-DI-0001: Create a user for the container**


        * Last user should not be root
WARN    - DKL-DI-0006: Avoid latest tag
        * Avoid 'latest' tag
INFO    - CIS-DI-0005: Enable Content trust for Docker
        * export DOCKER_CONTENT_TRUST=1 before docker pull/build
INFO    - CIS-DI-0006: Add HEALTHCHECK instruction to the container image
        * not found HEALTHCHECK statement
INFO    - CIS-DI-0008: Confirm safety of setuid/setgid files
        * setgid file: grwxr-xr-x usr/bin/chage
        * setuid file: urwxr-xr-x usr/bin/umount
        * setgid file: grwxr-xr-x usr/bin/wall
        * setgid file: grwxr-xr-x usr/bin/expiry
        * setuid file: urwxr-xr-x usr/bin/chfn
        * setgid file: grwxr-xr-x usr/sbin/unix_chkpwd
        * setuid file: urwxr-xr-x usr/bin/gpasswd
        * setuid file: urwxr-xr-x usr/bin/mount
        * setuid file: urwxr-xr-x usr/bin/newgrp
        * setuid file: urwxr-xr-x usr/bin/chsh
        * setuid file: urwxr-xr-x usr/bin/passwd
        * setuid file: urwxr-xr-x usr/bin/su
        * setgid file: grwxr-xr-x usr/sbin/pam_extrausers_chkpwd


3. [3. Mini web server](#part-3-mini-web-server)


## 6. –ë–∞–∑–æ–≤—ã–π **Docker Compose**

![part 6](screenshots/6.yml.png)<br>

–í–æ—Ç –≤—ã –∏ –∑–∞–∫–æ–Ω—á–∏–ª–∏ –≤–∞—à—É —Ä–∞–∑–º–∏–Ω–∫—É. –ê —Ö–æ—Ç—è –ø–æ–≥–æ–¥–∏—Ç–µ...
–ü–æ—á–µ–º—É –±—ã –Ω–µ –ø–æ—ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Å —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ–º –ø—Ä–æ–µ–∫—Ç–∞, —Å–æ—Å—Ç–æ—è—â–µ–≥–æ —Å—Ä–∞–∑—É –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –¥–æ–∫–µ—Ä –æ–±—Ä–∞–∑–æ–≤?

**== –ó–∞–¥–∞–Ω–∏–µ ==**

##### –ù–∞–ø–∏—Å–∞—Ç—å —Ñ–∞–π–ª *docker-compose.yml*, —Å –ø–æ–º–æ—â—å—é –∫–æ—Ç–æ—Ä–æ–≥–æ:
##### 1) –ü–æ–¥–Ω—è—Ç—å –¥–æ–∫–µ—Ä –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏–∑ [–ß–∞—Å—Ç–∏ 5](#part-5-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç-dockle) _(–æ–Ω –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏, —Ç.–µ. –Ω–µ –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é **EXPOSE** –∏ –º–∞–ø–∏—Ç—å –ø–æ—Ä—Ç—ã –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—É—é –º–∞—à–∏–Ω—É)_
##### 2) –ü–æ–¥–Ω—è—Ç—å –¥–æ–∫–µ—Ä –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å **nginx**, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã —Å 8080 –ø–æ—Ä—Ç–∞ –Ω–∞ 81 –ø–æ—Ä—Ç –ø–µ—Ä–≤–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
##### –ó–∞–º–∞–ø–∏—Ç—å 8080 –ø–æ—Ä—Ç –≤—Ç–æ—Ä–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –Ω–∞ 80 –ø–æ—Ä—Ç –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã

##### –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ –∑–∞–ø—É—â–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
##### –°–æ–±—Ä–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–µ–∫—Ç —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥ `docker-compose build` –∏ `docker-compose up`
##### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ –ø–æ *localhost:80* –æ—Ç–¥–∞–µ—Ç—Å—è –Ω–∞–ø–∏—Å–∞–Ω–Ω–∞—è –≤–∞–º–∏ —Å—Ç—Ä–∞–Ω–∏—á–∫–∞, –∫–∞–∫ –∏ —Ä–∞–Ω–µ–µ

üí° [–ù–∞–∂–º–∏ —Ç—É—Ç](https://forms.yandex.ru/cloud/6418195450569020f1f159c4/), **—á—Ç–æ–±—ã –ø–æ–¥–µ–ª–∏—Ç—å—Å—è —Å –Ω–∞–º–∏ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑—å—é –Ω–∞ —ç—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç**. –≠—Ç–æ –∞–Ω–æ–Ω–∏–º–Ω–æ –∏ –ø–æ–º–æ–∂–µ—Ç –∫–æ–º–∞–Ω–¥–µ –ü—Ä–æ–¥—É–∫—Ç–∞ —Å–¥–µ–ª–∞—Ç—å —Ç–≤–æ—ë –æ–±—É—á–µ–Ω–∏–µ –ª—É—á—à–µ.